pool:
  vmImage: ubuntu-16.04
trigger:
- buildbranch_linux
pr: none
stages:
- stage: stage_0
  jobs:
  - job: ros_noetic_carrot_planner_ros_noetic_dwa_local_planner_ros_noetic_fake_localization_ros_noetic_global_planner_ros_noetic_move_slow_and_clear
    steps:
    - script: |-
        export CI=azure
        export GIT_BRANCH=$BUILD_SOURCEBRANCHNAME
        export FEEDSTOCK_NAME=$(basename ${BUILD_REPOSITORY_NAME})
        .scripts/run_docker_build.sh
      env:
        ANACONDA_API_TOKEN: $(ANACONDA_API_TOKEN)
        CURRENT_RECIPES: ros-noetic-carrot-planner ros-noetic-dwa-local-planner ros-noetic-fake-localization
          ros-noetic-global-planner ros-noetic-move-slow-and-clear
        DOCKER_IMAGE: condaforge/linux-anvil-comp7
      displayName: Build ros-noetic-carrot-planner ros-noetic-dwa-local-planner ros-noetic-fake-localization
        ros-noetic-global-planner ros-noetic-move-slow-and-clear
- stage: stage_1
  jobs:
  - job: ros_noetic_navigation
    steps:
    - script: |-
        export CI=azure
        export GIT_BRANCH=$BUILD_SOURCEBRANCHNAME
        export FEEDSTOCK_NAME=$(basename ${BUILD_REPOSITORY_NAME})
        .scripts/run_docker_build.sh
      env:
        ANACONDA_API_TOKEN: $(ANACONDA_API_TOKEN)
        CURRENT_RECIPES: ros-noetic-navigation
        DOCKER_IMAGE: condaforge/linux-anvil-comp7
      displayName: Build ros-noetic-navigation
